<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Rsync on an Android phone - Jason Antman's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blog.jasonantman.com/2012/04/rsync-on-an-android-phone/">

        <meta name="author" content="admin" />
        <meta name="keywords" content="android,rsync,tasker" />
        <meta name="description" content="Every once in a while, there are some files that I want kept in sync between my Android-based phone and one of my Linux (or Mac, or any Unix, or maybe Windows too, but I use Linux…) boxes. Yeah, I can copy them over manually via USB or even something …" />

        <meta property="og:site_name" content="Jason Antman's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Rsync on an Android phone"/>
        <meta property="og:url" content="https://blog.jasonantman.com/2012/04/rsync-on-an-android-phone/"/>
        <meta property="og:description" content="Every once in a while, there are some files that I want kept in sync between my Android-based phone and one of my Linux (or Mac, or any Unix, or maybe Windows too, but I use Linux…) boxes. Yeah, I can copy them over manually via USB or even something …"/>
        <meta property="article:published_time" content="2012-04-04" />
            <meta property="article:section" content="Software" />
            <meta property="article:tag" content="android" />
            <meta property="article:tag" content="rsync" />
            <meta property="article:tag" content="tasker" />
            <meta property="article:author" content="admin" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://blog.jasonantman.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blog.jasonantman.com/theme/css/pygments/default.css" rel="stylesheet">
        <link href="https://blog.jasonantman.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/style.css" type="text/css"/>
        <link href="https://blog.jasonantman.com/theme/css/shariff/shariff.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/forkongithub.min.css" type="text/css" />

        <link href="https://blog.jasonantman.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog ATOM Feed"/>

        <link href="https://blog.jasonantman.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Jason Antman's Blog RSS Feed"/>


        <link href="https://blog.jasonantman.com/feeds/categories/software.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog Software ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
<span id="forkongithub"><a href="https://github.com/jantman/blog">Fork me on GitHub</a></span>        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://blog.jasonantman.com/" class="navbar-brand">
Jason Antman's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/categories/aws/index.html">AWS</a></li>
                    <li><a href="/categories/software/index.html">Software</a></li>
                    <li><a href="/categories/hardware/index.html">Hardware</a></li>
                    <li><a href="/categories/diy-home-automation-security/index.html">DIY / Home Automation / Security</a></li>
                    <li><a href="/categories/miscellaneous/index.html">Miscellaneous</a></li>
                    <li><a href="/tags.html">Tags</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://blog.jasonantman.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.jasonantman.com/2012/04/rsync-on-an-android-phone/"
                       rel="bookmark"
                       title="Permalink to Rsync on an Android phone">
                        Rsync on an Android&nbsp;phone
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-04-04T20:40:00-04:00"> Wed 04 April 2012</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://blog.jasonantman.com/tags/android/index.html">android</a>
        /
	<a href="https://blog.jasonantman.com/tags/rsync/index.html">rsync</a>
        /
	<a href="https://blog.jasonantman.com/tags/tasker/index.html">tasker</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Every once in a while, there are some files that I want kept in sync
between my Android-based phone and one of my Linux (or Mac, or any Unix,
or maybe Windows too, but I use Linux&#8230;) boxes. Yeah, I can copy them
over manually via <span class="caps">USB</span> or even something a bit simpler like
<a href="https://market.android.com/details?id=lysesoft.andftp">AndFTP</a>
(assuming you can <span class="caps">SCP</span> to the target machine). But that&#8217;s a real pain for
anything like my <a href="http://keepass.info/">KeePass</a> (well, actually
<a href="http://www.keepassx.org/">KeePassX</a> and
<a href="https://market.android.com/details?id=com.android.keepass">KeePassDroid</a>)
password database, that I might add something to at any time and forget
to sync. I also try to occasionally (waiting in line?) backup <span class="caps">SMS</span>, call
logs, etc. on my phone, and like to have those synced back to the
desktop&nbsp;automatically.</p>
<p>Enter the solution: <a href="https://market.android.com/details?id=eu.kowalczuk.rsync4android">rsync backup for
Android</a>,
a <a href="http://rsync.samba.org/">rsync</a> client for Android that includes
Tasker plugins (there are a few things about the app that I don&#8217;t like,
but it seems to be the only option at the moment), and
<a href="https://market.android.com/details?id=net.dinglisch.android.taskerm">Tasker</a>,
an automation framework for Android.Tasker is one of the few Android
apps that I&#8217;ve actually bought (i.e. not free/no-cost), and is currently
selling for $6.49. It&#8217;s an incredibly capable task automator, very much
akin to <a href="http://www.twofortyfouram.com/">Locale</a> on steroids. On the
down side, Tasker can eat up battery life if you don&#8217;t configure it
intelligently, and it&#8217;s not <em>always</em> 100% reliable when interacting with
the system. On the positive side, Tasker can identify practically any
combination of states in the android system (from hardware and software
events to <span class="caps">GPS</span> location, time, signal status, etc.) and perform almost
any task on the system based on this information. Sure, this specific
problem could be solved with a cron replacement (which Android lacks, of
course), but Tasker can do things like play specific audio files when
you get an <span class="caps">SMS</span> from a specific number, mute audio at certain <span class="caps">GPS</span>
locations, or turn WiFi on when I get home and off when I leave the
house. It also has a plugin architecture, and rsync backup for Android
happens to have a plugin that works with&nbsp;it.</p>
<p>So, our goal is to have a daily, bi-directional, newest-file-wins sync
between a directory on our Android phone and a directory on a computer.
I&#8217;m not going to go into a lot of the computer-side stuff, mainly
because that varies quite a bit between operating systems, and also
because my personal setup is a bit paranoid in terms of security. For
the computer side, we&#8217;ll need a machine that can be SSHed to from the
Internet (either a static <span class="caps">IP</span> or a known hostname/dynamic <span class="caps">DNS</span>), a user
that can run rsync over <span class="caps">SSH</span>, and a directory that&#8217;s writable&nbsp;(obviously).</p>
<p><strong>Setup:</strong></p>
<ol>
<li>Buy and install the
    <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a>&nbsp;app.</li>
<li>Install the <a href="https://play.google.com/store/apps/details?id=eu.kowalczuk.rsync4android">rsync backup for
    Android</a>&nbsp;app.</li>
<li>Configure the rsync stuff on the computer. In the simplest form,
    we&#8217;ll just need a user that can login and run rsync, and a directory
    to sync from/to <em>(note: this should be a directory used only for
    syncing the&nbsp;phone&#8230;).</em></li>
<li>Open the rsync backup for Android app. Use Menu -> Generate Keys to
    generate a new pair of <span class="caps">SSH</span> keys, and then get the public key setup
    on the target computer. See <a href="http://android.kowalczuk.eu/rsync4android/">the developer&#8217;s web
    site</a> for&nbsp;instructions.</li>
<li>Once keys are setup, create a new profile called &#8220;<span class="caps">PC</span>-droid&#8221;. Set the
    local directory to a new empty directory (I used <code>/sdcard/sync</code>),
    enter the remote host address, port, username, and remote directory,
    and select the private <span class="caps">SSH</span> key that you created. Check off &#8220;rsync on
    reverse direction&#8221;. As this program is just a <span class="caps">GUI</span> wrapper around
    normal rsync binaries, you can specify additional options to the
    rsync command; my string ended up being
    <code>-vHrltDuO --chmod=Du+rwx,go-rwx,Fu+rw,go-rw --no-perms</code>. If it
    helps, at the bottom of the screen you can see the actual rsync
    command line that will be run. Save when&nbsp;done.</li>
<li>Save the profile, then long-press it and select &#8220;Duplicate&#8221;. Change
    the name to &#8220;droid-<span class="caps">PC</span>&#8221;, uncheck &#8220;rsync in reverse direction&#8221;, and
    change your additional options as needed (mine became
    <code>-vHrltDu --chmod=Dug+rwx,o-rwx,Fug+rw,o-rw --no-perms</code>). Save when&nbsp;done.</li>
<li>Create a test file in the sync directory on the <span class="caps">PC</span>, and a different
    one in the sync directory on the&nbsp;droid.</li>
<li>One at a time, in the rsync backup app, tap on the profile names. If
    all goes well, the syncs should run, and both files will now be in
    both places. If there are any problems, the output should help; the
    most likely issues are probably permissions, rsync command options,
    or <span class="caps">SSH</span>&nbsp;keys.</li>
<li>Long-press each profile, select &#8220;Edit&#8221;, and check off &#8220;Close log
    window after job is done&#8221;. Save&nbsp;profile.</li>
<li>Now fire up Tasker. Click the &#8220;+&#8221; at the bottom of the screen to
    create a new profile, call it &#8220;sync&#8221;, and click the check&nbsp;mark.</li>
<li>On the First Context panel, tap Time, and select when you want the
    jobs to run; I chose 03:01. Tap the check&nbsp;mark.</li>
<li>On the Task Selection panel, tap New Task. Give it a name, like&nbsp;&#8220;sync2&#8221;.</li>
<li>On the Task Edit panel, tap the &#8220;+&#8221; button at the bottom left, tap
    Plugin, tap &#8220;rsync backup for Android&#8221;, click the &#8220;Edit&#8221; button on
    the Configuration line, and select the <span class="caps">PC</span>-droid rsync profile. Tap
    the check mark in the lower left to&nbsp;save.</li>
<li>Repeat the last step for the droid-<span class="caps">PC</span> rsync&nbsp;profile.</li>
<li>Tap the check box in the lower left. This saves the&nbsp;profile.</li>
<li>In the main Tasker screen, make sure there&#8217;s a green check to the
    right of the profile you just added, and that the button at the
    bottom right of the screen is set to&nbsp;&#8220;On&#8221;.</li>
</ol>
<p>Assuming this all went well, the next time the time you specified rolls
around, your sync should run. If you gave the task a name in step 12,
you can setup additional profiles to run it at other times (or use the
repeat logic&nbsp;builtin).</p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- Shariff Button BEGIN -->
    <div class="shariff"
        data-lang="en"
        data-orientation="horizontal"
        data-services = "[&quot;facebook&quot;,&quot;googleplus&quot;,&quot;twitter&quot;,&quot;linkedin&quot;,&quot;diaspora&quot;]"
        data-theme="standard"
        data-url="https://blog.jasonantman.com/2012/04/rsync-on-an-android-phone/"></div>
    <!-- Shariff Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

                    var disqus_identifier = 'rsync-on-an-android-phone';
                var disqus_url = 'https://blog.jasonantman.com/2012/04/rsync-on-an-android-phone/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2022/05/adding-a-bltouch-to-a-creality-cr-10s-running-marlin-2-firmware/">Adding a BLTouch to a Creality <span class="caps">CR</span>-10S running Marlin 2&nbsp;Firmware</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2021/03/migrating-kodi-to-mariadb-with-locked-down-permissions-and-no-importexport/">Migrating Kodi to MariaDB, with locked-down permissions and no&nbsp;import/export</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2021/03/octoprint-power-outage-handling/">OctoPrint Power Outage&nbsp;Handling</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2020/11/on-the-creation-use-and-management-of-docker-images/">On The Creation, Use, and Management of Docker&nbsp;Images</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2019/04/galaxy-s10--android-9-alarm-app-broken-by-battery-optimization/">Galaxy S10 / Android 9 alarm app broken by battery&nbsp;optimization</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Twitter Timeline -->
<li class="list-group-item">
  <h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4>
  <div id="twitter_timeline">
    <a class="twitter-timeline" data-width="250" data-height="300" data-dnt="true" data-theme="light" href="https://twitter.com/j_antman">Tweets by j_antman</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</li>
<!-- End Sidebar/Twitter Timeline -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
  <a href="https://github.com/jantman">@jantman</a> on GitHub
</li>
<!-- End Sidebar/Github -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://www.jasonantman.com" target="_blank">Homepage</a>
    </li>
    <li class="list-group-item">
      <a href="http://resume.jasonantman.com" target="_blank">Resume</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2022 Jason Antman
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://blog.jasonantman.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.jasonantman.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.jasonantman.com/theme/js/respond.min.js"></script>



    <!-- GITHUB_REPOS_JSON (explicitly pinned repos ) -->
  <script id="GithubReposJson" type="application/json">
  [{"description": "A script and python package to check your AWS service limits and usage via boto3.", "name": "awslimitchecker", "html_url": "https://github.com/jantman/awslimitchecker"}, {"description": "A collection of my standalone scripts to small/quick for their own repos. All kinds of useful stuff.", "name": "misc-scripts", "html_url": "https://github.com/jantman/misc-scripts"}, {"description": "Responsive Flask/SQLAlchemy personal finance app, specifically for biweekly budgeting.", "name": "biweeklybudget", "html_url": "https://github.com/jantman/biweeklybudget"}, {"description": "A standard to easily communicate to humans and machines the development/support and usability status of software repositories/projects.", "name": "repostatus.org", "html_url": "https://github.com/jantman/repostatus.org"}, {"description": "home automation/security config/scripts/tooling - HomeAssistant, AppDaemon, ZoneMinder, etc.", "name": "home-automation-configs", "html_url": "https://github.com/jantman/home-automation-configs"}, {"description": "A Python application for Linux machines to perform WiFi site surveys and present the results as a heatmap overlayed on a floorplan", "name": "python-wifi-survey-heatmap", "html_url": "https://github.com/jantman/python-wifi-survey-heatmap"}]
  </script>

<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = 'https://blog.jasonantman.com/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  console.log($('#GithubReposJson').html());
  github.showSpecificRepos({
    user: 'jantman',
    target: '#gh_repos',
    repos: JSON.parse($('#GithubReposJson').html())
  });
});
</script>
<script src="https://blog.jasonantman.com/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-2718127-2', 'jasonantman.com');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->


    <!-- add shariff support -->
    <script src="https://blog.jasonantman.com/theme/js/shariff.min.js"></script>
</body>
</html>