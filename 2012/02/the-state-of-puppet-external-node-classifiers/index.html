<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>The state of Puppet External Node Classifiers - Jason Antman's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://blog.jasonantman.com/2012/02/the-state-of-puppet-external-node-classifiers/">

        <meta name="author" content="admin" />
        <meta name="keywords" content="dashboard,foreman,node classifier,puppet" />
        <meta name="description" content="Update November 2013: This post has brought an amazing amount of traffic to my blog, probably because it still seems to be one of the only ENC comparisons out there. Both Dashboard (and Puppet Enterprise Console) and The Foreman have changed quite a bit since I wrote this. Foreman has …" />

        <meta property="og:site_name" content="Jason Antman's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="The state of Puppet External Node Classifiers"/>
        <meta property="og:url" content="https://blog.jasonantman.com/2012/02/the-state-of-puppet-external-node-classifiers/"/>
        <meta property="og:description" content="Update November 2013: This post has brought an amazing amount of traffic to my blog, probably because it still seems to be one of the only ENC comparisons out there. Both Dashboard (and Puppet Enterprise Console) and The Foreman have changed quite a bit since I wrote this. Foreman has …"/>
        <meta property="article:published_time" content="2012-02-26" />
            <meta property="article:section" content="Software" />
            <meta property="article:tag" content="dashboard" />
            <meta property="article:tag" content="foreman" />
            <meta property="article:tag" content="node classifier" />
            <meta property="article:tag" content="puppet" />
            <meta property="article:author" content="admin" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://blog.jasonantman.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://blog.jasonantman.com/theme/css/pygments/default.css" rel="stylesheet">
        <link href="https://blog.jasonantman.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/style.css" type="text/css"/>
        <link href="https://blog.jasonantman.com/theme/css/shariff/shariff.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://blog.jasonantman.com/theme/css/forkongithub.min.css" type="text/css" />

        <link href="https://blog.jasonantman.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog ATOM Feed"/>

        <link href="https://blog.jasonantman.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Jason Antman's Blog RSS Feed"/>


        <link href="https://blog.jasonantman.com/feeds/categories/software.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog Software ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
<span id="forkongithub"><a href="https://github.com/jantman/blog">Fork me on GitHub</a></span>        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://blog.jasonantman.com/" class="navbar-brand">
Jason Antman's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/about.html">About Me</a></li>
                    <li><a href="/categories/aws/index.html">AWS</a></li>
                    <li><a href="/categories/software/index.html">Software</a></li>
                    <li><a href="/categories/hardware/index.html">Hardware</a></li>
                    <li><a href="/categories/diy-home-automation-security/index.html">DIY / Home Automation / Security</a></li>
                    <li><a href="/categories/miscellaneous/index.html">Miscellaneous</a></li>
                    <li><a href="/tags.html">Tags</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://blog.jasonantman.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://blog.jasonantman.com/2012/02/the-state-of-puppet-external-node-classifiers/"
                       rel="bookmark"
                       title="Permalink to The state of Puppet External Node Classifiers">
                        The state of Puppet External Node&nbsp;Classifiers
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-02-26T12:45:00-05:00"> Sun 26 February 2012</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://blog.jasonantman.com/tags/dashboard/index.html">dashboard</a>
        /
	<a href="https://blog.jasonantman.com/tags/foreman/index.html">foreman</a>
        /
	<a href="https://blog.jasonantman.com/tags/node-classifier/index.html">node classifier</a>
        /
	<a href="https://blog.jasonantman.com/tags/puppet/index.html">puppet</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><strong>Update November 2013</strong>: This post has brought an amazing amount of
traffic to my blog, probably because it still seems to be one of the
only <span class="caps">ENC</span> comparisons out there. Both Dashboard (and Puppet Enterprise
Console) and The Foreman have changed quite a bit since I wrote this.
Foreman has certainly been developed at warp speed. I&#8217;ll try to write an
update to this sometime soon, but be advised that the information here
is somewhat&nbsp;dated.</p>
<p>At work, we&#8217;re in the process of rolling out
<a href="http://projects.puppetlabs.com/projects/puppet">puppet</a> for
configuration management of our servers. It will be an integral part of
the provisioning process of all new physical and virtual hosts, and will
also be phased in on existing hosts as possible. Right now, we have an
initial puppet install that was &#8220;development&#8221;, but we&#8217;re about to move
to &#8220;production&#8221; (new puppetmaster in our production infrastructure,
production MySQL, etc.). We&#8217;ve been using
<a href="http://puppetlabs.com/puppet/related-projects/dashboard/">Dashboard</a>,
but just as a report viewer. Up until now, we&#8217;ve been using nodes.pp and
per-node flat-file manifests. I&#8217;ve got a few issues with this, but the
biggest is that all of our node definitions (and their classes and
parameters) live in the same <span class="caps">SVN</span> repository as our modules and other
puppet configuration. Not only does this mean a checkout and commit just
to change a node parameter or add a module/class to a node, but it also
means that for my team members who don&#8217;t have previous puppet
experience, it greatly blurs the line between administering puppet
(developing and maintaining modules) and using puppet (building a node,
changing node params or modules/classes), since both tasks are
accomplished in the same <span class="caps">SVN</span>&nbsp;repository.</p>
<p>So, I&#8217;ve been pushing an <a href="http://docs.puppetlabs.com/guides/external_nodes.html">External Node Classifier
(<span class="caps">ENC</span>)</a> with a web
interface as one of the biggest feature enhancements we need for our
puppet install. The complicating factor is that I&#8217;ve been given a time
frame of approximately 1 week to get the &#8220;production&#8221; puppetmaster
running on our production infrastructure and marked as &#8220;done&#8221;. That
includes the <span class="caps">ENC</span>. At my last gig, at Rutgers University, I wrote our <span class="caps">ENC</span>
in <span class="caps">PHP</span> (actually I wrote it for my half-dozen or so boxes at home, and
brought it to Rutgers gratis), and it also handled kickstart file
distribution and <span class="caps">PXE</span> configuration, and was extended to also set <span class="caps">DHCP</span>
and <span class="caps">DNS</span> for the hosts - a one-stop solution. Unfortunately the code is
very organization-specific, not terribly solid, and the <span class="caps">UI</span> looks awful,
so it&#8217;s not a fit for the current employer. So I have to find something
else that fits the bill. I have a list of initial (&#8220;phase 1&#8221;)
requirements that are a mix of functionality that we require and
management&nbsp;requirements:</p>
<ul>
<li>Must support environments, since we make use of&nbsp;them.</li>
<li>Must support default values for parameters based on environment,
    &#8220;zone&#8221; (a custom fact and variable we define), or a combination of&nbsp;both.</li>
<li>For accountability and legal reasons, must have full auditing of all
    changes by all users (and, obviously, support&nbsp;authentication).</li>
<li>Display node last run time and&nbsp;status.</li>
</ul>
<p>As well as at least the ability to implement some of our phase 2&nbsp;requirements:</p>
<ul>
<li>Ability to show modules and classes applied to a node, including
    those required/included through other&nbsp;modules/classes/roles.</li>
<li>Should support at least some level of puppet report&nbsp;display.</li>
<li>Ability to trigger a node run (kick) from the&nbsp;<span class="caps">UI</span>.</li>
<li>Some level of permission separation, <span class="caps">ACL</span> or <span class="caps">RBAC</span> so that we could
    potentially delegate control of a certain module or parameter, on a
    certain group of nodes, to the development&nbsp;team.</li>
<li>Per-node links to other tools such as Icinga/Nagios or our&nbsp;wiki.</li>
<li>Some way of detecting valid classes and modules (and our &#8220;role&#8221;
    module) per-environment (i.e. available modules/classes/roles should
    be pulled from the configs, not manually&nbsp;entered).</li>
<li>Ability to display puppet docs from&nbsp;modules/classes</li>
</ul>
<p>Our current situation makes this even more difficult: we&#8217;re an
operations team of five (hiring at the moment to fill the position of
the sixth), and I believe I&#8217;m the only member of the team with any real
software development experience. And none of us have experience with
Ruby (which Puppet and most of its universe is written in). This means
that any in-house solution runs the risk of being unmaintainable should
I get hit by a bus (some of our team have various levels of experience
with Perl and other scripting languages, but not really from an app
development perspective). Because of these reasons, there&#8217;s a management
aversion to anything that we code ourselves (well, these reasons, and
the fact that with a shorthanded team we don&#8217;t have much time for
projects without an immediate&nbsp;impact).</p>
<p>So, I spent hours looking around online trying to find existing
web-based <span class="caps">ENC</span> projects, and came up with a pretty small&nbsp;list:</p>
<ul>
<li><a href="http://puppetlabs.com/puppet/related-projects/dashboard/">Dashboard</a>,
    the Puppet Labs web <span class="caps">UI</span>. It&#8217;s the most common web-based puppet <span class="caps">ENC</span> as
    far as I know, and since it&#8217;s an official Puppet Labs project (and
    the basis for their Puppet Enterprise <span class="caps">UI</span>), its future is pretty
    secure. But it&#8217;s still very basic (let alone enterprise features),
    and has a plugin system that is very&nbsp;young.</li>
<li><a href="http://theforeman.org/projects/foreman">The Foreman</a> is probably
    the second-most-common puppet <span class="caps">ENC</span>, and has also been around about as
    long as Dashboard. Its features are nice, and it includes support
    for Kickstart (management of <span class="caps">TFTP</span> and <span class="caps">DHCP</span>) and <span class="caps">DNS</span>, as well as some
    virtual machine management. Unfortunately, we already have <span class="caps">DHCP</span> and
    <span class="caps">DNS</span> infrastructure so I&#8217;m sure it would be quite a bit of effort to
    integrate it with our environment, and for a non-Ruby shop, it has
    the same problem with maintainability of custom&nbsp;code.</li>
<li><a href="http://www.ingent.net/projects/initr/wiki">initr</a>, a
    <a href="http://www.redmine.org/">Redmine</a> plugin that functions as an <span class="caps">ENC</span>
    and manages modules. It includes <span class="caps">RBAC</span> and leverages Redmine. But
    since we don&#8217;t use Redmine, it&#8217;s not much of an&nbsp;advantage.</li>
<li><a href="http://www.gitorious.org/opennms-puppet-node-pusher">OpenNMS Puppet Node
    Pusher</a>An <span class="caps">ENC</span>
    script for <a href="http://www.opennms.org/">OpenNMS</a>, which we also don&#8217;t&nbsp;use.</li>
</ul>
<p>I was pretty amazed to see that nobody had written a puppet web <span class="caps">UI</span>/<span class="caps">ENC</span>
in <span class="caps">PHP</span> (or Perl or Python), especially since Puppet is now quite&nbsp;popular.</p>
<p>So, I&#8217;m essentially left with the following&nbsp;options:</p>
<ul>
<li>Start from scratch and write my own in <span class="caps">PHP</span>. By far the worst option,
    since we don&#8217;t have anyone on our team who&#8217;s likely to maintain it,
    and the Puppet community is&nbsp;Ruby-focused.</li>
<li>Use Foreman, since it&#8217;s the only one that appears to offer audit
    logging, have a bunch of features that don&#8217;t work for us, and
    hopefully deal with&nbsp;it.</li>
<li>Learn Ruby, write plugins for Dashboard, and hope that Puppet Labs
    or someone else will pick them up and maintain them if I&nbsp;can&#8217;t.</li>
</ul>
<p>At the moment, I&#8217;ve decided to investigate Foreman and initr in a bit
more depth, and also play around with the Dashboard code and try to pick
up some Ruby (as they&#8217;re all written in Ruby anyway). I&#8217;ll also discuss
these options with the team and see how opinions go (keeping in mind
that the higher the likelihood of the community picking up/merging my
changes, the&nbsp;better).</p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- Shariff Button BEGIN -->
    <div class="shariff"
        data-lang="en"
        data-orientation="horizontal"
        data-services = "[&quot;facebook&quot;,&quot;googleplus&quot;,&quot;twitter&quot;,&quot;linkedin&quot;,&quot;diaspora&quot;]"
        data-theme="standard"
        data-url="https://blog.jasonantman.com/2012/02/the-state-of-puppet-external-node-classifiers/"></div>
    <!-- Shariff Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

                    var disqus_identifier = 'the-state-of-puppet-external-node-classifiers';
                var disqus_url = 'https://blog.jasonantman.com/2012/02/the-state-of-puppet-external-node-classifiers/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/12/twilio-programmable-wireless-ppp-proxy-docker-image/">Twilio Programmable Wireless <span class="caps">PPP</span> Proxy Docker&nbsp;Image</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/12/2018-in-review/">2018 in&nbsp;Review</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/12/aws-reinvent-2018-my-experience-and-recommendations-for-next-time/"><span class="caps">AWS</span> re:Invent 2018: My Experience and Recommendations for Next&nbsp;Time</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/11/inexpensive-26USD-1080p-wifi-camera/">Inexpensive $<span class="caps">26USD</span> 1080p WiFi&nbsp;Camera</a></li>
    <li class="list-group-item"><a href="https://blog.jasonantman.com/2018/11/open-source-wifi-site-survey-tool/">Open Source WiFi Site Survey Heatmap&nbsp;Tool</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Twitter Timeline -->
<li class="list-group-item">
  <h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4>
  <div id="twitter_timeline">
    <a class="twitter-timeline" data-width="250" data-height="300" data-dnt="true" data-theme="light" href="https://twitter.com/j_antman">Tweets by j_antman</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</li>
<!-- End Sidebar/Twitter Timeline -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
  <a href="https://github.com/jantman">@jantman</a> on GitHub
</li>
<!-- End Sidebar/Github -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://www.jasonantman.com" target="_blank">Homepage</a>
    </li>
    <li class="list-group-item">
      <a href="http://resume.jasonantman.com" target="_blank">Resume</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Jason Antman
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://blog.jasonantman.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://blog.jasonantman.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://blog.jasonantman.com/theme/js/respond.min.js"></script>



    <!-- GITHUB_REPOS_JSON (explicitly pinned repos ) -->
  <script id="GithubReposJson" type="application/json">
  [{"description": "A script and python module to check your AWS service limits and usage via boto.", "name": "awslimitchecker", "html_url": "https://github.com/jantman/awslimitchecker"}, {"description": "Puppet module and accompanying documentation to install/setup Arch linux on a MacBook Pro Retina 11,4", "name": "puppet-archlinux-macbookretina", "html_url": "https://github.com/jantman/puppet-archlinux-macbookretina"}, {"description": "A collection of my standalone scripts to small/quick for their own repos. All kinds of useful stuff.", "name": "misc-scripts", "html_url": "https://github.com/jantman/misc-scripts"}, {"description": "Responsive Flask/SQLAlchemy personal finance app, specifically for biweekly budgeting.", "name": "biweeklybudget", "html_url": "https://github.com/jantman/biweeklybudget"}, {"description": "A standard to easily communicate to humans and machines the development/support and usability status of software repositories/projects.", "name": "repostatus.org", "html_url": "https://github.com/jantman/repostatus.org"}, {"description": "home automation/security config/scripts/tooling - HomeAssistant, AppDaemon, ZoneMinder, etc.", "name": "home-automation-configs", "html_url": "https://github.com/jantman/home-automation-configs"}]
  </script>

<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = 'https://blog.jasonantman.com/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  console.log($('#GithubReposJson').html());
  github.showSpecificRepos({
    user: 'jantman',
    target: '#gh_repos',
    repos: JSON.parse($('#GithubReposJson').html())
  });
});
</script>
<script src="https://blog.jasonantman.com/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-2718127-2', 'jasonantman.com');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->


    <!-- add shariff support -->
    <script src="https://blog.jasonantman.com/theme/js/shariff.min.js"></script>
</body>
</html>