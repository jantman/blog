<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>How To Wipe a Bunch of Machines Quickly - Jason Antman's Blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://blog.jasonantman.com/2009/02/how-to-wipe-a-bunch-of-machines-quickly/">

        <meta name="author" content="admin" />
        <meta name="keywords" content="automation,cobbler,dban,pxe,retirement,security,wiping" />
        <meta name="description" content="Updated 2009-03-05, see bottom. At work the other week, we decommissioned 24 old desktops - Dell GX280’s that were used in the student labs as print release stations. They didn’t have anything sensitive on them, just Windows XP, but with licensing and all we have to wipe Windows off …" />

        <meta property="og:site_name" content="Jason Antman's Blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="How To Wipe a Bunch of Machines Quickly"/>
        <meta property="og:url" content="http://blog.jasonantman.com/2009/02/how-to-wipe-a-bunch-of-machines-quickly/"/>
        <meta property="og:description" content="Updated 2009-03-05, see bottom. At work the other week, we decommissioned 24 old desktops - Dell GX280’s that were used in the student labs as print release stations. They didn’t have anything sensitive on them, just Windows XP, but with licensing and all we have to wipe Windows off …"/>
        <meta property="article:published_time" content="2009-02-03" />
            <meta property="article:section" content="Tech HowTos" />
            <meta property="article:tag" content="automation" />
            <meta property="article:tag" content="cobbler" />
            <meta property="article:tag" content="dban" />
            <meta property="article:tag" content="pxe" />
            <meta property="article:tag" content="retirement" />
            <meta property="article:tag" content="security" />
            <meta property="article:tag" content="wiping" />
            <meta property="article:author" content="admin" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://blog.jasonantman.com/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="http://blog.jasonantman.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://blog.jasonantman.com/theme/css/pygments/default.css" rel="stylesheet">
        <link href="http://blog.jasonantman.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="http://blog.jasonantman.com/theme/css/style.css" type="text/css"/>
        <link href="http://blog.jasonantman.com/theme/css/shariff/shariff.min.css" rel="stylesheet">

    <link rel="stylesheet" href="http://blog.jasonantman.com/theme/css/forkongithub.min.css" type="text/css" />

        <link href="http://blog.jasonantman.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog ATOM Feed"/>

        <link href="http://blog.jasonantman.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="Jason Antman's Blog RSS Feed"/>


        <link href="http://blog.jasonantman.com/feeds/categories/tech-howtos.atom.xml" type="application/atom+xml" rel="alternate"
              title="Jason Antman's Blog Tech HowTos ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
<span id="forkongithub"><a href="https://github.com/jantman/blog">Fork me on GitHub</a></span>        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://blog.jasonantman.com/" class="navbar-brand">
Jason Antman's Blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://blog.jasonantman.com/pages/about.html">
                             About
                          </a></li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/ideas-and-rants/index.html">Ideas and rants</a>
                        </li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/miscellaneous/index.html">Miscellaneous</a>
                        </li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/monitoring/index.html">Monitoring</a>
                        </li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/ops/index.html">Ops</a>
                        </li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/projects/index.html">Projects</a>
                        </li>
                        <li >
                            <a href="http://blog.jasonantman.com/categories/puppet/index.html">Puppet</a>
                        </li>
                        <li class="active">
                            <a href="http://blog.jasonantman.com/categories/tech-howtos/index.html">Tech howtos</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://blog.jasonantman.com/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://blog.jasonantman.com/2009/02/how-to-wipe-a-bunch-of-machines-quickly/"
                       rel="bookmark"
                       title="Permalink to How To Wipe a Bunch of Machines Quickly">
                        How To Wipe a Bunch of Machines&nbsp;Quickly
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2009-02-03T15:51:00-05:00"> Tue 03 February 2009</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="http://blog.jasonantman.com/tags/automation/index.html">automation</a>
        /
	<a href="http://blog.jasonantman.com/tags/cobbler/index.html">cobbler</a>
        /
	<a href="http://blog.jasonantman.com/tags/dban/index.html">dban</a>
        /
	<a href="http://blog.jasonantman.com/tags/pxe/index.html">pxe</a>
        /
	<a href="http://blog.jasonantman.com/tags/retirement/index.html">retirement</a>
        /
	<a href="http://blog.jasonantman.com/tags/security/index.html">security</a>
        /
	<a href="http://blog.jasonantman.com/tags/wiping/index.html">wiping</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p><strong>Updated 2009-03-05, see&nbsp;bottom.</strong></p>
<p>At work the other week, we decommissioned 24 old desktops - Dell <span class="caps">GX280</span>&#8217;s
that were used in the student labs as print release stations. They
didn&#8217;t have anything sensitive on them, just Windows <span class="caps">XP</span>, but with
licensing and all we have to wipe Windows off of them before surplussing
them. Since there were 24 of them, it wasn&#8217;t exactly going to be the
quickest task. Moreover, the <span class="caps">GX280</span>&#8217;s we used don&#8217;t have <em>any</em> removable
media&nbsp;drives.</p>
<p>A few people mentioned <a href="http://www.dban.org/">Darik&#8217;s Boot And Nuke</a>
(<span class="caps">DBAN</span>), which is a bootable Linux distro (<span class="caps">CD</span> or floppy) aimed at wiping
all of the fixed disks attached to a machine. While they do offer an
&#8220;Enterprise&#8221; version that supports network booting (and logging wipe
verifications to a central machine), the pricing isn&#8217;t exactly favorable
for a small project (or something that just needs Windows to go away,
not a DoD-grade 7-pass overwrite with random data). Between the lack of
a <span class="caps">CD</span> drive and the apparent need to select wiping options at boot, this
didn&#8217;t seem to be the best method for&nbsp;me.</p>
<p>Luckily, with a little googling, I came by the
<a href="https://fedorahosted.org/cobbler/">Cobbler</a> project, a ready-to-run
install server aimed at automating network-based <span class="caps">OS</span> installation. It
turns out that Cobbler has a wiki article on <a href="https://fedorahosted.org/cobbler/wiki/SystemRetirement">system
retirement</a> that
deals with using Cobbler to automate a network boot of <span class="caps">DBAN</span>. Cobbler
takes control of <span class="caps">DHCP</span> and <span class="caps">TFTP</span>, boots the machine(s) to a <span class="caps">PXE</span> boot menu,
and allows selection of one of the cobbler&nbsp;&#8220;profiles&#8221;.</p>
<p>The general procedure is something along these&nbsp;lines:</p>
<ol>
<li>Get the <span class="caps">DBAN</span> iso and grab the .ima image off of it. Loopback mount&nbsp;it.</li>
<li>Copy the <code>initrd</code> and kernel into <code>/opt/cobbler/dban</code> as
    <code>initrd.img</code> and <code>vmlinuz</code>,&nbsp;respectively.</li>
<li>Assuming you have cobblerd running (cobbler check), add a Distro for
    <span class="caps">DBAN</span>:
    <code>cobbler distro add --name=DBAN-1.0.7-i386 --kernel=/opt/cobbler/dban/vmlinuz --initrd=/opt/cobbler/dban/initrd.img --kopts="root=/dev/ram0 init=/rc nuke=dwipe floppy=0,16,cmos"</code></li>
<li>Add a Profile for it:
    <code>cobbler profile add --name=DBAN-1.0.7-i386 --distro=DBAN-1.0.7-i386</code></li>
<li><code>cobbler sync</code></li>
</ol>
<p>Assuming all went well, when we <span class="caps">PXE</span> boot a machine on the same <span class="caps">LAN</span> as
the Cobbler system, we&#8217;ll get <span class="caps">DHCP</span> and a <span class="caps">PXE</span> boot menu which will list
<code>DBAN-1.0.7.i386</code> as one of the options. On some of the <span class="caps">GX280</span>&#8217;s that I
did, I had to go into the <span class="caps">BIOS</span> and enable <span class="caps">PXE</span> boot (or select <span class="caps">PXE</span> from
the <span class="caps">BIOS</span> boot menu). Now, when <span class="caps">DBAN</span> boots, we&#8217;ll get the standard dmesg
output and then a selection screen allowing us to pick a wipe type (I
used the single pass all zeros for just getting rid of the old <span class="caps">OS</span>) and
select which disks to wipe. If you use the default wipe, just press
&#8220;space&#8221; to select all disks and then &#8220;F10&#8221; to begin the&nbsp;wipe.</p>
<p>This process allowed me to wipe 7 machines at once (8 port <span class="caps">KVM</span>, 1 port
for the server). With a better <span class="caps">KVM</span> or (even better yet) a totally
automatic system as described below, it would essentially be limited to
whatever the server and network hardware will&nbsp;handle.</p>
<p>To add a little more automation, we can run
<code>cobbler system add --name=default --profile=DBAN-1.0.7-i386</code> which adds
a default profile to Cobbler, saying that any machines with MACs not
specifically assigned to a profile should boot the <span class="caps">DBAN</span> profile, and
bypassing the <span class="caps">PXE</span> boot&nbsp;menu.</p>
<p><strong><span class="caps">WARNING</span>:</strong> what follows will setup Cobbler and <span class="caps">DBAN</span> to automatically
wipe all <span class="caps">PXE</span>-booting devices without <span class="caps">ANY</span> human intervention. Use at your
own risk and, for God&#8217;s sake, don&#8217;t plug your server into a production
network (I recommend this only in a lab environment with a dedicated
switch, all machines in one physical area, and no possibility of getting
on the same &#8216;net as production&nbsp;machines).</p>
<p>It&#8217;s theoretically possible to totally automate this setup. According to
the <span class="caps">DBAN</span> docs, it will also accept kernel options (kopts) that effect
how dnuke works - specifically, <code>--autonuke</code> to tell it to wipe without
human intervention and a method option such as <code>--method=zero</code> to select
the wipe method. This means that if we <span class="caps">PXE</span> boot with kernel options set
to <code>nuke="dwipe --autonuke --method=zero"</code> we should go straight to the
dwipe utility (the heart of <span class="caps">DBAN</span>) and automatically wipe all disks by
writing zeros once - without operator intervention. Unfortunately,
there&#8217;s a <a href="https://fedorahosted.org/cobbler/ticket/148">bug</a> in the
current (1.4.0) Cobbler which prevents quote-encapsulated strings in
kopts, meaning that we can&#8217;t set one kernel option to a string with
whitespace as needed here. If this bug is fixed, it should allow this
process to work without any operator intervention, assuming the clients
will <span class="caps">PXE</span>&nbsp;boot.</p>
<p><strong>Updated 2009-03-05</strong> I haven&#8217;t tested it yet, but apparently the
Cobbler bug preventing complex kernel options has <a href="https://fedorahosted.org/pipermail/cobbler/2009-February/002874.html">been
fixed</a>.
The fix should be included in the 1.4.3 release and is currently in the
development&nbsp;tree.</p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- Shariff Button BEGIN -->
    <div class="shariff"
        data-lang="en"
        data-orientation="horizontal"
        data-services = "[&quot;facebook&quot;,&quot;googleplus&quot;,&quot;twitter&quot;,&quot;linkedin&quot;,&quot;diaspora&quot;]"
        data-theme="standard"
        data-url="http://blog.jasonantman.com/2009/02/how-to-wipe-a-bunch-of-machines-quickly/"></div>
    <!-- Shariff Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

                    var disqus_identifier = 'how-to-wipe-a-bunch-of-machines-quickly';
                var disqus_url = 'http://blog.jasonantman.com/2009/02/how-to-wipe-a-bunch-of-machines-quickly/';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="http://blog.jasonantman.com/2017/10/cloud-custodian-architecture-deployment-and-policy-preprocessing/">Cloud Custodian Architecture, Deployment and Policy&nbsp;Preprocessing</a></li>
    <li class="list-group-item"><a href="http://blog.jasonantman.com/2017/10/pre-authorized-aws-console-urls-for-notifications/">Pre-Authorized <span class="caps">AWS</span> Console URLs for&nbsp;Notifications</a></li>
    <li class="list-group-item"><a href="http://blog.jasonantman.com/2017/04/python-script-to-check-xfinity-data-usage/">Python script to check xfinity data&nbsp;usage</a></li>
    <li class="list-group-item"><a href="http://blog.jasonantman.com/2017/03/vyos-on-alix-2c1-single-board-computer/">VyOS on Alix 2C1 Single Board&nbsp;Computer</a></li>
    <li class="list-group-item"><a href="http://blog.jasonantman.com/2016/10/yesterdays-widespread-internet-outage-for-non-geeks/">Yesterday&#8217;s Widespread Internet Outage, for&nbsp;non-geeks</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Twitter Timeline -->
<li class="list-group-item">
  <h4><i class="fa fa-twitter fa-lg"></i><span class="icon-label">Latest Tweets</span></h4>
  <div id="twitter_timeline">
    <a class="twitter-timeline" data-width="250" data-height="300" data-dnt="true" data-theme="light" href="https://twitter.com/j_antman">Tweets by j_antman</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</li>
<!-- End Sidebar/Twitter Timeline -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
  <a href="https://github.com/jantman">@jantman</a> on GitHub
</li>
<!-- End Sidebar/Github -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://www.jasonantman.com" target="_blank">Homepage</a>
    </li>
    <li class="list-group-item">
      <a href="http://resume.jasonantman.com" target="_blank">Resume</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Jason Antman
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://blog.jasonantman.com/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://blog.jasonantman.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://blog.jasonantman.com/theme/js/respond.min.js"></script>



    <!-- GITHUB_REPOS_JSON (explicitly pinned repos ) -->
  <script id="GithubReposJson" type="application/json">
  [{"description": "A script and python module to check your AWS service limits and usage via boto.", "name": "awslimitchecker", "html_url": "https://github.com/jantman/awslimitchecker"}, {"description": "Puppet module and accompanying documentation to install/setup Arch linux on a MacBook Pro Retina 11,4", "name": "puppet-archlinux-macbookretina", "html_url": "https://github.com/jantman/puppet-archlinux-macbookretina"}, {"description": "A collection of scripts that I've written", "name": "misc-scripts", "html_url": "https://github.com/jantman/misc-scripts"}, {"description": "Responsive Flask/SQLAlchemy personal finance app, specifically for biweekly budgeting.", "name": "biweeklybudget", "html_url": "https://github.com/jantman/biweeklybudget"}, {"description": "Calculate detailed download stats and generate HTML and badges for PyPI packages", "name": "pypi-download-stats", "html_url": "https://github.com/jantman/pypi-download-stats"}, {"description": "A standard to easily communicate to humans and machines the development/support and usability status of software repositories/projects.", "name": "repostatus.org", "html_url": "https://github.com/jantman/repostatus.org"}]
  </script>

<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = 'http://blog.jasonantman.com/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  console.log($('#GithubReposJson').html());
  github.showSpecificRepos({
    user: 'jantman',
    target: '#gh_repos',
    repos: JSON.parse($('#GithubReposJson').html())
  });
});
</script>
<script src="http://blog.jasonantman.com/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jantman'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-2718127-2', 'jasonantman.com');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->


    <!-- add shariff support -->
    <script src="http://blog.jasonantman.com/theme/js/shariff.min.js"></script>
</body>
</html>